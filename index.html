<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <script src="https://code.jquery.com/jquery.js"></script>
    <title>Ron Swanson</title>
  </head>
  <body>
    <button type="submit" id="submit-long">Display long quotes</button>
    <button type="submit" id="submit-short">Display short quotes</button>

    <div id="quotes"></div>

    <script>
    const queryUrl = "https://ron-swanson-quotes.herokuapp.com/v2/quotes/20";
    //Search for long quotes (5 or more words)
      $("#submit-long").on("click", function(e) {
        e.preventDefault();
        $("#quotes").empty();
        
        $.ajax({
          method: "GET",
          url: queryUrl
        }).then(response => {
          console.log(response);
          const ltitle = $(`<h1>Long Quotes</h1>`);
          $("#quotes").append(ltitle);

          for (let i = 0; i < response.length; i++) {
            const quoteArr = response[i].split(" ");
            if (quoteArr.length >= 5) {
              
              const longQuote = $(`<h3>${quoteArr.join(" ")}</h3><button id="rate">Rate this Quote</button>`);
              $("#quotes").append(longQuote);
            }
          }
        });
      });

      //Search for short quotes (4 words or less)
      $("#submit-short").on("click", function(e) {
        e.preventDefault();
        $("#quotes").empty();

        $.ajax({
          method: "GET",
          url: queryUrl
        }).then(response => {
          //console.log(response);

          const stitle = $(`<h1>Short Quotes</h1>`);
          $("#quotes").append(stitle);

          for (let i = 0; i < response.length; i++) {
            const quoteArr = response[i].split(" ");
            console.log(quoteArr);
            if (quoteArr.length <= 4) {

              const shortQuote = $(`<h3>${quoteArr.join(" ")}</h3><button id="rate">Rate this Quote</button>`);
              $("#quotes").append(shortQuote);
            }
          }
        });
      });

      // To rate a quote
      $(document).on("click", "#rate", () => {
        alert("You clicked the rate button.  Rate functionatity will be up shortly");
      });
    </script>
  </body>
</html>
